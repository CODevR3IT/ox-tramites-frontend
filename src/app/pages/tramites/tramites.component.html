<div class="card">

    <div class="col-12 text-left" style="margin-bottom: 2%;">
        <button class="btn-tramite" (click)="muestraAviso(content)">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5" />
                <path d="M16 19h6" />
                <path d="M19 16v6" />
            </svg>
            <span>Agregar trámite</span>
        </button>
    </div>

    <!--costo_tramite: "0.00"
        documentos_requeridos: Array(5) [ {…}, {…}, {…}, … ]
        funda_juridico: null
        necesario_predial: 0
        necesario_presentante: 1
        nombre_tramite: "PRIMERA INSCRIPCIÓN"
        pktramite: 2
        requiere_pago_teso: 0
        tiempo_respuesta_dias:-->
    <div class="table-responsive">
        <table class="table table-vcenter text-nowrap datatable" style="width: 100%;">
            <thead>
                <tr>
                    <th>
                        <button class="table-sort" (click)="sort('')">Nombre trámite</button>
                    </th>
                    <th>
                        <button class="table-sort" (click)="sort('')">Costo trámite</button>
                    </th>
                    <th>
                        <button class="table-sort" (click)="sort('')">Documentos requeridos</button>
                    </th>
                    <th>
                        <button class="table-sort" (click)="sort('')">Fundamento juridico</button>
                    </th>
                    <th>
                        <button class="table-sort" (click)="sort('')">Necesario predial</button>
                    </th>
                    <th>
                        <button class="table-sort" (click)="sort('')">Necesario presente</button>
                    </th>
                    <th>
                        <button class="table-sort" (click)="sort('')">Requiere pago</button>
                    </th>
                    <th>
                        <button class="table-sort" (click)="sort('')">Tiempo respuesta</button>
                    </th>
                    <th>
                        <button class="table-sort">Editar</button>
                    </th>
                    <th>
                        <button class="table-sort" >Eliminar</button>
                    </th>
                </tr>
            </thead>
            <tbody>
                @for (tramite of data; track $index) {
                <tr>
                    <td>{{tramite.nombre_tramite}}</td>
                    <td>{{tramite.costo_tramite}}</td>
                    <td>
                        <ul>
                            @for (docto of tramite.documentos_requeridos; track $index) {
                            <li>{{docto.nombredocumento}}</li>
                            <li>{{docto.obligatorio}}</li>
                            }
                        </ul>
                    </td>
                    <td>{{tramite.funda_juridico}}</td>
                    <td>{{tramite.necesario_predial}}</td>
                    <td>{{tramite.necesario_presentante}}</td>
                    <td>{{tramite.requiere_pago_teso}}</td>
                    <td>{{tramite.tiempo_respuesta_dias}}</td>
                    <td class="text-center">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="icon icon-tabler icons-tabler-outline icon-tabler-edit">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                            <path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1" />
                            <path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z" />
                            <path d="M16 5l3 3" />
                        </svg>

                    </td>
                    <td class="text-center">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="icon icon-tabler icons-tabler-outline icon-tabler-trash">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                            <path d="M4 7l16 0" />
                            <path d="M10 11l0 6" />
                            <path d="M14 11l0 6" />
                            <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
                            <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
                        </svg>
                    </td>
                </tr>
                }
            </tbody>
        </table>
    </div>
    <!--
    <div class="card-body">
        <p class="m-0 text-secondary">
            Mostrando <span> {{ paginationQuery.page }}</span> -
            <span> {{ paginationData.last_page }} </span> de
            <span> {{ paginationData.total }} </span> entradas
        </p>
    </div>
    <div class="card-footer">
        <ngb-pagination class="m-0 ms-auto" [(page)]="paginationQuery.page" (pageChange)="getData()"
            [pageSize]="paginationQuery.limit || 10" [boundaryLinks]="true" [collectionSize]="paginationData.total"
            [ellipses]="false" [rotate]="true" [maxSize]="5" />
    </div>
    -->
</div>

<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Agregar trámite</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body" style="text-align: justify;">
        <div class="row">
            <div class="col-lg-12 col-12 mb-3">
                <label class="form-label">Trámite</label>
                <input type="text" class="form-control" name="example-text-input" placeholder="Ingresa tu calle"
                    placeholder="Ingrese el nombre del trámite" [(ngModel)]="payload.tramite" #tramiteInput />
            </div>
            <div class="col-lg-12 col-12 mb-3">
                <label class="form-label">Detalle</label>
                <textarea type="text" rows="5" class="form-control" name="example-text-input"
                    placeholder="Detalle el trámite" maxlength="300" [(ngModel)]="payload.detalle"
                    #detalleInput></textarea>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" (click)="modal.dismiss('cancel click')">Cerrar</button>
        <button type="button" class="btn btn-aceptar" (click)="guardarTramite()">Aceptar</button>
    </div>
</ng-template>