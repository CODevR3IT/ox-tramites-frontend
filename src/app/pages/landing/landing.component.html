<style>
  .steps {
  display: flex;
  justify-content: space-between;
  margin-bottom: 20px;
}

.step-item {
  position: relative;
  text-align: center;
  width: 100%;
}

.step-marker {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #ccc;
  color: #fff;
  font-weight: bold;
  margin: 0 auto;
  transition: background-color 0.3s;
}

.step-content {
  margin-top: 5px;
  font-size: 14px;
}

/* Estilo cuando el paso est√° activo */
.step-item.active .step-marker {
  background-color: #007bff;
}

/* Estilo cuando el paso ya fue completado */
.step-item.completed .step-marker {
  background-color: #28a745;
}

</style>
<div class="card" [@fadeInLeft]="fadeInLeft">
  <div class="card-status-top bg-primary"></div>
  <div class="card-body">
    <h3 class="titulo-pagina card-title text-center primary">Registro ciudadano</h3>
    
    <div class="container mt-5">
      <div class="steps d-flex">
        <div *ngFor="let step of steps; let i = index" 
             class="step-item"
             [ngClass]="{'active': i === currentStep, 'completed': i < currentStep}">
          <div class="step-marker">{{ i + 1 }}</div>
          <div class="step-content">{{ step }}</div>
        </div>
      </div>
    
      <div class="mt-4">
        <!-- Contenido din√°mico de cada paso -->
        <!-- ++++++ -->
        <!-- Paso 1 -->
        <!-- ++++++ -->
        <div *ngIf="currentStep === 0">
          <div class="offset-1 col-10" id="prueba1">
        
            <h4 class="subtitulo-pagina">Registro de datos de usuario</h4>
            @if(existeCURP){
            <div class="row">
    
              <div class="col-4 mb-3">
                <label class="form-label">CURP</label>
                <input type="text" class="form-control" name="example-text-input" placeholder="Ingresa tu CURP" [(ngModel)]="payload.curp"/>
              </div>
              <div class="col-4 mb-3">
                <button class="btn btn-primary" (click)="getCURP()">Obtener</button>
              </div>
            </div>
            }
            <div class="row">
              <div class="col-4 offset-4">
                <div>
                  <label class="form-check">
                    <input class="form-check-input" type="checkbox" (click)="muestraCURP($event)" />
                    <span class="form-check-label">Checkbox input</span>
                  </label>
                </div>
                ¬øEres persona extranjera sin CURP?
              </div>
    
            </div>
            
    
            <div class="row">
    
              <div class="col-4 mb-3">
                <label class="form-label">Nombre(s)</label>
                <input type="text" class="form-control" name="example-text-input" placeholder="Ingresa tu nombre" [(ngModel)]="formData.nombre" #nombreInput/>
              </div>
      
              <div class="col-4 mb-3">
                <label class="form-label">Apellido paterno</label>
                <input type="text" class="form-control" name="example-text-input" placeholder="Ingresa tu apellido paterno" [(ngModel)]="formData.apPaterno" #appatInput/>
              </div>
      
              <div class="col-4 mb-3">
                <label class="form-label">Apellido materno</label>
                <input type="text" class="form-control" name="example-text-input" placeholder="Ingresa tu apellido materno" [(ngModel)]="formData.apMaterno"/>
              </div>
      
              <div class="col-4 mb-3">
                <label class="form-label">Sexo</label>
                <select class="form-select" name="opcion" id="exampleFormControlInput9"
                    [(ngModel)]="formData.sexo" required #sexo="ngModel" #sexoInput
                    [class.is-invalid]="sexo.invalid && (sexo.dirty || sexo.touched)">
                    <option value="1">Femenino</option>
                    <option value="2">Masculino</option>
                </select>
              </div>
      
              <div class="col-4 mb-3">
                <label class="form-label">Fecha de nacimiento</label>
                <input type="date" class="form-control" name="example-text-input" placeholder="Ingresa tu fecha de nacimiento" [(ngModel)]="formData.fecha" #fechaInput/>
              </div>
    
            </div>
    
            <!-- CP -->
            <div class="row">
    
              <div class="col-4 mb-3">
                <label class="form-label">C√≥digo postal</label>
                <input type="text" class="form-control" name="example-text-input" placeholder="Ingresa tu c√≥digo postal" [(ngModel)]="payload.cp" #cpInput/>
              </div>
              <div class="col-4 mb-3">
                <button class="btn btn-primary" (click)="getCP()">Obtener</button>
              </div>
            </div>
    
            <!-- Estado, municipio y colonia -->
            <div class="row">
              <div class="col-4 mb-3">
                <label class="form-label">Colonia</label>
                <select class="form-select" name="opcion" id="exampleFormControlInput9"
                  [(ngModel)]="formData.colonia" required #colonia="ngModel" #coloniaInput
                  [class.is-invalid]="colonia.invalid && (colonia.dirty || colonia.touched)"
                  (change)="verData()">
                    @for (direccion of arregloCP; track $index) {
                      <option [ngValue]="direccion">{{direccion.colonia}}</option>
                    }
                </select>
              </div>

              <div class="col-4 mb-3">
                <label class="form-label">Estado</label>
                <input type="text" class="form-control" name="example-text-input" placeholder="" [(ngModel)]="formData.estado" #estadoInput/>
              </div>
    
              <div class="col-4 mb-3">
                <label class="form-label">Municipio</label>
                <input type="text" class="form-control" name="example-text-input" placeholder="Ingresa tu municipio" [(ngModel)]="formData.municipio" #municipioInput/>
              </div>
            </div>
    
            <!-- <div class="row" style="margin-top: 20px;">
              <div class="col-2 offset-8 text-end"><a href="#" class="btn boton-cancelar-regresar" role="button">Cancelar</a></div>
              <div class="col-2 text-end"><a href="#" class="btn boton-siguiente-finalizar" role="button">Siguiente</a></div>
            </div> -->
            
          </div>
        </div>

        <!-- ++++++ -->
        <!-- Paso 2 -->
        <!-- ++++++ -->
        <div *ngIf="currentStep === 1">
          <div class="offset-1 col-10" id="prueba2">
        
            <h4 class="subtitulo-pagina">Medios de contacto</h4>
          
            <!-- Correo electr√≥nico -->
            <div class="row">
    
              <div class="col-6 mb-3">
                <label class="form-label">Correo electr√≥nico</label>
                <input type="text" class="form-control" name="example-text-input" placeholder="Ingresa tu correo electr√≥nico" [(ngModel)]="formData.correo" #correoInput/>
              </div>
    
              <div class="col-6 mb-3">
                <label class="form-label">Confirma tu correo electr√≥nico</label>
                <input type="text" class="form-control" name="example-text-input" placeholder="Confirma tu correo electr√≥nico" [(ngModel)]="payload.correo" #correoInput/>
              </div>
    
            </div>
          
            <!-- N√∫mero de celular -->
            <div class="row">
    
              <div class="col-6 mb-3">
                <label class="form-label">N√∫mero celular</label>
                <input type="text" class="form-control" name="example-text-input" placeholder="Ingresa tu n√∫mero celular" [(ngModel)]="formData.telefono" #telefonoInput/>
              </div>
    
              <div class="col-6 mb-3">
                <label class="form-label">Confirma tu n√∫mero celular</label>
                <input type="text" class="form-control" name="example-text-input" placeholder="Confirma tu n√∫mero celular" [(ngModel)]="payload.telefono" #telefonoInput/>
              </div>
    
            </div>
          </div>
        </div>
    
        <!-- ++++++ -->
        <!-- Paso 3 -->
        <!-- ++++++ -->
        <div *ngIf="currentStep === 2">
          <label>
            <input type="checkbox" [(ngModel)]="formData.confirmado" />
            Confirmo que mis datos son correctos
          </label>
          <div class="offset-1 col-10" id="prueba3">
        
            <h4 class="subtitulo-pagina">Creaci√≥n de contrase√±a</h4>
    
            <div class="row">
    
              <div class="col-4 mb-3">
                <label class="form-label">Contrase√±a</label>
                <input type="password" class="form-control" name="example-text-input" placeholder="Crea una contrase√±a" [(ngModel)]="formData.password" #passwordInput/>
              </div>
    
              <div class="col-4 mb-3">
                <label class="form-label">Confirmar contrase√±a</label>
                <input type="password" class="form-control" name="example-text-input" placeholder="Confirma tu contrase√±a" [(ngModel)]="payload.password" #passwordInput/>
              </div>
    
              <div class="col-4 mb-3">
                <label class="form-label">Mostrar contrase√±a</label>
              </div>
    
            </div>
    
          </div>
    
        </div>
    
        <div *ngIf="currentStep === 3">
          <h3 class="text-success">‚úÖ ¬°Registro Completo!</h3>
          <table class="table table-bordered">
            <tr><th>Campo</th><th>Valor</th></tr>
            <tr><td><strong>Nombre</strong></td><td>{{ formData.nombre }}</td></tr>
            <tr><td><strong>Detalles</strong></td><td>{{ formData.detalles }}</td></tr>
            <tr><td><strong>Confirmaci√≥n</strong></td><td>{{ formData.confirmado ? 'S√≠' : 'No' }}</td></tr>
          </table>
          <button class="btn btn-warning mt-3" (click)="confirmReset()">üîÑ Reiniciar</button>
        </div>
    
        <!-- Botones de navegaci√≥n -->
        <div class="mt-4">
          <button class="btn btn-secondary me-2" (click)="prevStep()" [disabled]="currentStep === 0">
            Anterior
          </button>
          <button class="btn btn-primary" (click)="nextStep()" [disabled]="currentStep === steps.length - 1 && currentStep <= 3">
            Siguiente
          </button>
          <button class="btn btn-primary" (click)="guardar()" *ngIf="currentStep >= 3">
            Guardar
          </button>
        </div>
      </div>
    </div>
    
  </div>
</div>
